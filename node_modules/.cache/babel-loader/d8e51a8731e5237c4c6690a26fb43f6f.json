{"ast":null,"code":"var _jsxFileName = \"C:\\\\PROYECTOS\\\\CACAO-swap\\\\src\\\\components\\\\SearchModal\\\\CurrencySearch.tsx\",\n    _s = $RefreshSig$();\n\nimport { ETHER } from '@pancakeswap-libs/sdk';\nimport React, { useCallback, useContext, useEffect, useMemo, useRef, useState } from 'react';\nimport { Text, CloseIcon } from '@pancakeswap-libs/uikit';\nimport { useSelector } from 'react-redux';\nimport { useTranslation } from 'react-i18next';\nimport { ThemeContext } from 'styled-components';\nimport AutoSizer from 'react-virtualized-auto-sizer';\nimport useI18n from 'hooks/useI18n';\nimport { useActiveWeb3React } from '../../hooks';\nimport { useAllTokens, useToken } from '../../hooks/Tokens';\nimport { useSelectedListInfo } from '../../state/lists/hooks';\nimport { LinkStyledButton } from '../Shared';\nimport { isAddress } from '../../utils';\nimport Card from '../Card';\nimport Column from '../Column';\nimport ListLogo from '../ListLogo';\nimport QuestionHelper from '../QuestionHelper';\nimport Row, { RowBetween } from '../Row';\nimport CommonBases from './CommonBases';\nimport CurrencyList from './CurrencyList';\nimport { filterTokens } from './filtering';\nimport SortButton from './SortButton';\nimport { useTokenComparator } from './sorting';\nimport { PaddedColumn, SearchInput, Separator } from './styleds';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport function CurrencySearch({\n  selectedCurrency,\n  onCurrencySelect,\n  otherSelectedCurrency,\n  showCommonBases,\n  onDismiss,\n  isOpen,\n  onChangeList\n}) {\n  _s();\n\n  const {\n    t\n  } = useTranslation();\n  const {\n    chainId\n  } = useActiveWeb3React();\n  const theme = useContext(ThemeContext);\n  const fixedList = useRef();\n  const [searchQuery, setSearchQuery] = useState('');\n  const [invertSearchOrder, setInvertSearchOrder] = useState(false);\n  const allTokens = useAllTokens(); // if they input an address, use it\n\n  const isAddressSearch = isAddress(searchQuery);\n  const searchToken = useToken(searchQuery);\n  const showETH = useMemo(() => {\n    const s = searchQuery.toLowerCase().trim();\n    return s === '' || s === 'b' || s === 'bn' || s === 'bnb';\n  }, [searchQuery]);\n  const tokenComparator = useTokenComparator(invertSearchOrder);\n  const audioPlay = useSelector(state => state.user.audioPlay);\n  const filteredTokens = useMemo(() => {\n    if (isAddressSearch) return searchToken ? [searchToken] : [];\n    return filterTokens(Object.values(allTokens), searchQuery);\n  }, [isAddressSearch, searchToken, allTokens, searchQuery]);\n  const filteredSortedTokens = useMemo(() => {\n    if (searchToken) return [searchToken];\n    const sorted = filteredTokens.sort(tokenComparator);\n    const symbolMatch = searchQuery.toLowerCase().split(/\\s+/).filter(s => s.length > 0);\n    if (symbolMatch.length > 1) return sorted;\n    return [...(searchToken ? [searchToken] : []), // sort any exact symbol matches first\n    ...sorted.filter(token => {\n      var _token$symbol;\n\n      return ((_token$symbol = token.symbol) === null || _token$symbol === void 0 ? void 0 : _token$symbol.toLowerCase()) === symbolMatch[0];\n    }), ...sorted.filter(token => {\n      var _token$symbol2;\n\n      return ((_token$symbol2 = token.symbol) === null || _token$symbol2 === void 0 ? void 0 : _token$symbol2.toLowerCase()) !== symbolMatch[0];\n    })];\n  }, [filteredTokens, searchQuery, searchToken, tokenComparator]);\n  const handleCurrencySelect = useCallback(currency => {\n    onCurrencySelect(currency);\n    onDismiss();\n\n    if (audioPlay) {\n      const audio = document.getElementById('bgMusic');\n\n      if (audio) {\n        audio.play();\n      }\n    }\n  }, [onDismiss, onCurrencySelect, audioPlay]); // clear the input on open\n\n  useEffect(() => {\n    if (isOpen) setSearchQuery('');\n  }, [isOpen]); // manage focus on modal show\n\n  const inputRef = useRef();\n  const handleInput = useCallback(event => {\n    var _fixedList$current;\n\n    const input = event.target.value;\n    const checksummedInput = isAddress(input);\n    setSearchQuery(checksummedInput || input);\n    (_fixedList$current = fixedList.current) === null || _fixedList$current === void 0 ? void 0 : _fixedList$current.scrollTo(0);\n  }, []);\n  const handleEnter = useCallback(e => {\n    if (e.key === 'Enter') {\n      const s = searchQuery.toLowerCase().trim();\n\n      if (s === 'bnb') {\n        handleCurrencySelect(ETHER);\n      } else if (filteredSortedTokens.length > 0) {\n        var _filteredSortedTokens;\n\n        if (((_filteredSortedTokens = filteredSortedTokens[0].symbol) === null || _filteredSortedTokens === void 0 ? void 0 : _filteredSortedTokens.toLowerCase()) === searchQuery.trim().toLowerCase() || filteredSortedTokens.length === 1) {\n          handleCurrencySelect(filteredSortedTokens[0]);\n        }\n      }\n    }\n  }, [filteredSortedTokens, handleCurrencySelect, searchQuery]);\n  const selectedListInfo = useSelectedListInfo();\n  const TranslateString = useI18n();\n  return /*#__PURE__*/_jsxDEV(Column, {\n    style: {\n      width: '100%',\n      flex: '1 1'\n    },\n    children: [/*#__PURE__*/_jsxDEV(PaddedColumn, {\n      gap: \"14px\",\n      children: [/*#__PURE__*/_jsxDEV(RowBetween, {\n        children: [/*#__PURE__*/_jsxDEV(Text, {\n          children: [TranslateString(82, 'Select a token'), /*#__PURE__*/_jsxDEV(QuestionHelper, {\n            text: TranslateString(128, 'Find a token by searching for its name or symbol or by pasting its address below.')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(CloseIcon, {\n          onClick: onDismiss\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(SearchInput, {\n        type: \"text\",\n        id: \"token-search-input\",\n        placeholder: t('tokenSearchPlaceholder'),\n        value: searchQuery,\n        ref: inputRef,\n        onChange: handleInput,\n        onKeyDown: handleEnter\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 9\n      }, this), showCommonBases && /*#__PURE__*/_jsxDEV(CommonBases, {\n        chainId: chainId,\n        onSelect: handleCurrencySelect,\n        selectedCurrency: selectedCurrency\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(RowBetween, {\n        children: [/*#__PURE__*/_jsxDEV(Text, {\n          fontSize: \"14px\",\n          children: TranslateString(126, 'Token name')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(SortButton, {\n          ascending: invertSearchOrder,\n          toggleSortOrder: () => setInvertSearchOrder(iso => !iso)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Separator, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        flex: '1'\n      },\n      children: /*#__PURE__*/_jsxDEV(AutoSizer, {\n        disableWidth: true,\n        children: ({\n          height\n        }) => /*#__PURE__*/_jsxDEV(CurrencyList, {\n          height: height,\n          showETH: showETH,\n          currencies: filteredSortedTokens,\n          onCurrencySelect: handleCurrencySelect,\n          otherCurrency: otherSelectedCurrency,\n          selectedCurrency: selectedCurrency,\n          fixedListRef: fixedList\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 7\n    }, this), null && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Separator, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Card, {\n        children: /*#__PURE__*/_jsxDEV(RowBetween, {\n          children: [selectedListInfo.current ? /*#__PURE__*/_jsxDEV(Row, {\n            children: [selectedListInfo.current.logoURI ? /*#__PURE__*/_jsxDEV(ListLogo, {\n              style: {\n                marginRight: 12\n              },\n              logoURI: selectedListInfo.current.logoURI,\n              alt: `${selectedListInfo.current.name} list logo`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 199,\n              columnNumber: 21\n            }, this) : null, /*#__PURE__*/_jsxDEV(Text, {\n              id: \"currency-search-selected-list-name\",\n              children: selectedListInfo.current.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 205,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 197,\n            columnNumber: 17\n          }, this) : null, /*#__PURE__*/_jsxDEV(LinkStyledButton, {\n            style: {\n              fontWeight: 500,\n              color: theme.colors.textSubtle,\n              fontSize: 16\n            },\n            onClick: onChangeList,\n            id: \"currency-search-change-list-button\",\n            children: selectedListInfo.current ? TranslateString(180, 'Change') : TranslateString(1152, 'Select a list')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 141,\n    columnNumber: 5\n  }, this);\n}\n\n_s(CurrencySearch, \"MdvttHBie1DB++aYnERhz2Fv9Dk=\", false, function () {\n  return [useTranslation, useActiveWeb3React, useAllTokens, useToken, useTokenComparator, useSelector, useSelectedListInfo, useI18n];\n});\n\n_c = CurrencySearch;\nexport default CurrencySearch;\n\nvar _c;\n\n$RefreshReg$(_c, \"CurrencySearch\");","map":{"version":3,"sources":["C:/PROYECTOS/CACAO-swap/src/components/SearchModal/CurrencySearch.tsx"],"names":["ETHER","React","useCallback","useContext","useEffect","useMemo","useRef","useState","Text","CloseIcon","useSelector","useTranslation","ThemeContext","AutoSizer","useI18n","useActiveWeb3React","useAllTokens","useToken","useSelectedListInfo","LinkStyledButton","isAddress","Card","Column","ListLogo","QuestionHelper","Row","RowBetween","CommonBases","CurrencyList","filterTokens","SortButton","useTokenComparator","PaddedColumn","SearchInput","Separator","CurrencySearch","selectedCurrency","onCurrencySelect","otherSelectedCurrency","showCommonBases","onDismiss","isOpen","onChangeList","t","chainId","theme","fixedList","searchQuery","setSearchQuery","invertSearchOrder","setInvertSearchOrder","allTokens","isAddressSearch","searchToken","showETH","s","toLowerCase","trim","tokenComparator","audioPlay","state","user","filteredTokens","Object","values","filteredSortedTokens","sorted","sort","symbolMatch","split","filter","length","token","symbol","handleCurrencySelect","currency","audio","document","getElementById","play","inputRef","handleInput","event","input","target","value","checksummedInput","current","scrollTo","handleEnter","e","key","selectedListInfo","TranslateString","width","flex","iso","height","logoURI","marginRight","name","fontWeight","color","colors","textSubtle","fontSize"],"mappings":"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","sourcesContent":["import { Currency, ETHER, Token } from '@pancakeswap-libs/sdk'\r\nimport React, { KeyboardEvent, RefObject, useCallback, useContext, useEffect, useMemo, useRef, useState } from 'react'\r\nimport { Text, CloseIcon } from '@pancakeswap-libs/uikit'\r\nimport { useSelector } from 'react-redux'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { FixedSizeList } from 'react-window'\r\nimport { ThemeContext } from 'styled-components'\r\nimport AutoSizer from 'react-virtualized-auto-sizer'\r\nimport useI18n from 'hooks/useI18n'\r\nimport { useActiveWeb3React } from '../../hooks'\r\nimport { AppState } from '../../state'\r\nimport { useAllTokens, useToken } from '../../hooks/Tokens'\r\nimport { useSelectedListInfo } from '../../state/lists/hooks'\r\nimport { LinkStyledButton } from '../Shared'\r\nimport { isAddress } from '../../utils'\r\nimport Card from '../Card'\r\nimport Column from '../Column'\r\nimport ListLogo from '../ListLogo'\r\nimport QuestionHelper from '../QuestionHelper'\r\nimport Row, { RowBetween } from '../Row'\r\nimport CommonBases from './CommonBases'\r\nimport CurrencyList from './CurrencyList'\r\nimport { filterTokens } from './filtering'\r\nimport SortButton from './SortButton'\r\nimport { useTokenComparator } from './sorting'\r\nimport { PaddedColumn, SearchInput, Separator } from './styleds'\r\n\r\ninterface CurrencySearchProps {\r\n  isOpen: boolean\r\n  onDismiss: () => void\r\n  selectedCurrency?: Currency | null\r\n  onCurrencySelect: (currency: Currency) => void\r\n  otherSelectedCurrency?: Currency | null\r\n  showCommonBases?: boolean\r\n  onChangeList: () => void\r\n}\r\n\r\nexport function CurrencySearch({\r\n  selectedCurrency,\r\n  onCurrencySelect,\r\n  otherSelectedCurrency,\r\n  showCommonBases,\r\n  onDismiss,\r\n  isOpen,\r\n  onChangeList,\r\n}: CurrencySearchProps) {\r\n  const { t } = useTranslation()\r\n  const { chainId } = useActiveWeb3React()\r\n  const theme = useContext(ThemeContext)\r\n\r\n  const fixedList = useRef<FixedSizeList>()\r\n  const [searchQuery, setSearchQuery] = useState<string>('')\r\n  const [invertSearchOrder, setInvertSearchOrder] = useState<boolean>(false)\r\n  const allTokens = useAllTokens()\r\n\r\n  // if they input an address, use it\r\n  const isAddressSearch = isAddress(searchQuery)\r\n  const searchToken = useToken(searchQuery)\r\n\r\n  const showETH: boolean = useMemo(() => {\r\n    const s = searchQuery.toLowerCase().trim()\r\n    return s === '' || s === 'b' || s === 'bn' || s === 'bnb'\r\n  }, [searchQuery])\r\n\r\n  const tokenComparator = useTokenComparator(invertSearchOrder)\r\n\r\n  const audioPlay = useSelector<AppState, AppState['user']['audioPlay']>((state) => state.user.audioPlay)\r\n\r\n  const filteredTokens: Token[] = useMemo(() => {\r\n    if (isAddressSearch) return searchToken ? [searchToken] : []\r\n    return filterTokens(Object.values(allTokens), searchQuery)\r\n  }, [isAddressSearch, searchToken, allTokens, searchQuery])\r\n\r\n  const filteredSortedTokens: Token[] = useMemo(() => {\r\n    if (searchToken) return [searchToken]\r\n    const sorted = filteredTokens.sort(tokenComparator)\r\n    const symbolMatch = searchQuery\r\n      .toLowerCase()\r\n      .split(/\\s+/)\r\n      .filter((s) => s.length > 0)\r\n    if (symbolMatch.length > 1) return sorted\r\n\r\n    return [\r\n      ...(searchToken ? [searchToken] : []),\r\n      // sort any exact symbol matches first\r\n      ...sorted.filter((token) => token.symbol?.toLowerCase() === symbolMatch[0]),\r\n      ...sorted.filter((token) => token.symbol?.toLowerCase() !== symbolMatch[0]),\r\n    ]\r\n  }, [filteredTokens, searchQuery, searchToken, tokenComparator])\r\n\r\n  const handleCurrencySelect = useCallback(\r\n    (currency: Currency) => {\r\n      onCurrencySelect(currency)\r\n      onDismiss()\r\n      if (audioPlay) {\r\n        const audio = document.getElementById('bgMusic') as HTMLAudioElement\r\n        if (audio) {\r\n          audio.play()\r\n        }\r\n      }\r\n    },\r\n    [onDismiss, onCurrencySelect, audioPlay]\r\n  )\r\n\r\n  // clear the input on open\r\n  useEffect(() => {\r\n    if (isOpen) setSearchQuery('')\r\n  }, [isOpen])\r\n\r\n  // manage focus on modal show\r\n  const inputRef = useRef<HTMLInputElement>()\r\n  const handleInput = useCallback((event) => {\r\n    const input = event.target.value\r\n    const checksummedInput = isAddress(input)\r\n    setSearchQuery(checksummedInput || input)\r\n    fixedList.current?.scrollTo(0)\r\n  }, [])\r\n\r\n  const handleEnter = useCallback(\r\n    (e: KeyboardEvent<HTMLInputElement>) => {\r\n      if (e.key === 'Enter') {\r\n        const s = searchQuery.toLowerCase().trim()\r\n        if (s === 'bnb') {\r\n          handleCurrencySelect(ETHER)\r\n        } else if (filteredSortedTokens.length > 0) {\r\n          if (\r\n            filteredSortedTokens[0].symbol?.toLowerCase() === searchQuery.trim().toLowerCase() ||\r\n            filteredSortedTokens.length === 1\r\n          ) {\r\n            handleCurrencySelect(filteredSortedTokens[0])\r\n          }\r\n        }\r\n      }\r\n    },\r\n    [filteredSortedTokens, handleCurrencySelect, searchQuery]\r\n  )\r\n\r\n  const selectedListInfo = useSelectedListInfo()\r\n  const TranslateString = useI18n()\r\n  return (\r\n    <Column style={{ width: '100%', flex: '1 1' }}>\r\n      <PaddedColumn gap=\"14px\">\r\n        <RowBetween>\r\n          <Text>\r\n            {TranslateString(82, 'Select a token')}\r\n            <QuestionHelper\r\n              text={TranslateString(\r\n                128,\r\n                'Find a token by searching for its name or symbol or by pasting its address below.'\r\n              )}\r\n            />\r\n          </Text>\r\n          <CloseIcon onClick={onDismiss} />\r\n        </RowBetween>\r\n        <SearchInput\r\n          type=\"text\"\r\n          id=\"token-search-input\"\r\n          placeholder={t('tokenSearchPlaceholder')}\r\n          value={searchQuery}\r\n          ref={inputRef as RefObject<HTMLInputElement>}\r\n          onChange={handleInput}\r\n          onKeyDown={handleEnter}\r\n        />\r\n        {showCommonBases && (\r\n          <CommonBases chainId={chainId} onSelect={handleCurrencySelect} selectedCurrency={selectedCurrency} />\r\n        )}\r\n        <RowBetween>\r\n          <Text fontSize=\"14px\">{TranslateString(126, 'Token name')}</Text>\r\n          <SortButton ascending={invertSearchOrder} toggleSortOrder={() => setInvertSearchOrder((iso) => !iso)} />\r\n        </RowBetween>\r\n      </PaddedColumn>\r\n\r\n      <Separator />\r\n\r\n      <div style={{ flex: '1' }}>\r\n        <AutoSizer disableWidth>\r\n          {({ height }) => (\r\n            <CurrencyList\r\n              height={height}\r\n              showETH={showETH}\r\n              currencies={filteredSortedTokens}\r\n              onCurrencySelect={handleCurrencySelect}\r\n              otherCurrency={otherSelectedCurrency}\r\n              selectedCurrency={selectedCurrency}\r\n              fixedListRef={fixedList}\r\n            />\r\n          )}\r\n        </AutoSizer>\r\n      </div>\r\n\r\n      {null && (\r\n        <>\r\n          <Separator />\r\n          <Card>\r\n            <RowBetween>\r\n              {selectedListInfo.current ? (\r\n                <Row>\r\n                  {selectedListInfo.current.logoURI ? (\r\n                    <ListLogo\r\n                      style={{ marginRight: 12 }}\r\n                      logoURI={selectedListInfo.current.logoURI}\r\n                      alt={`${selectedListInfo.current.name} list logo`}\r\n                    />\r\n                  ) : null}\r\n                  <Text id=\"currency-search-selected-list-name\">{selectedListInfo.current.name}</Text>\r\n                </Row>\r\n              ) : null}\r\n              <LinkStyledButton\r\n                style={{ fontWeight: 500, color: theme.colors.textSubtle, fontSize: 16 }}\r\n                onClick={onChangeList}\r\n                id=\"currency-search-change-list-button\"\r\n              >\r\n                {selectedListInfo.current ? TranslateString(180, 'Change') : TranslateString(1152, 'Select a list')}\r\n              </LinkStyledButton>\r\n            </RowBetween>\r\n          </Card>\r\n        </>\r\n      )}\r\n    </Column>\r\n  )\r\n}\r\n\r\nexport default CurrencySearch\r\n"]},"metadata":{},"sourceType":"module"}